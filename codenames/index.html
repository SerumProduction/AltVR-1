<!DOCTYPE html>
<html>
<head>
  <title>Codenames</title>
  <script src="https://cdn.rawgit.com/mrdoob/three.js/r84/build/three.min.js"></script>
  <script src="https://sdk.altvr.com/libs/altspace.js/2.5.0/altspace.min.js"></script>
  <style>
    body {
      /*background-color: white;*/
      text-align: left;
      font-family: "Verdana";
      font-weight: bold;
    }
    th, td {
      background-color: black;
      color: white;
      border: 3px solid white;
      border-radius: 15px;
      width: 20%;
      height: 95px;
      text-align: center;
      font-size: 24px;
    }
    button {
      width: 200px;
      height: 30px;
      background-color: black;
      border: 3px solid white;
      font-weight: bold;
      color: white;
      text-align: left;
    }
    .smr {
      text-align: left;
      border: 3px solid red;
    }
    .smb {
      text-align: left;
      border: 3px solid blue;
    }
    .shuffle {
      text-align: center;
    }
  </style>
</head>
<body>
  <table style='width: 100%'>
  <tr>
    <td id='a1'>1</td>
    <td id='a2'>2</td> 
    <td id='a3'>3</td>
    <td id='a4'>4</td> 
    <td id='a5'>5</td>
  </tr>
  <tr>
    <td id='a6'>6</td>
    <td id='a7'>7</td> 
    <td id='a8'>8</td>
    <td id='a9'>9</td> 
    <td id='a10'>10</td>
  </tr>
  <tr>
    <td id='a11'>11</td>
    <td id='a12'>12</td> 
    <td id='a13'>13</td>
    <td id='a14'>14</td> 
    <td id='a15'>15</td>
  </tr>
  <tr>
    <td id='a16'>16</td>
    <td id='a17'>17</td> 
    <td id='a18'>18</td>
    <td id='a19'>19</td> 
    <td id='a20'>20</td>
  </tr>
  <tr>
    <td id='a21'>21</td>
    <td id='a22'>22</td> 
    <td id='a23'>23</td>
    <td id='a24'>24</td> 
    <td id='a25'>25</td>
  </tr>
</table>
  <p></p>
  <button class='smr'>Red:</button>
  <button class='smb'>Blue:</button>
  aaaaaaaaaaaaaaaaaa
  <button class='shuffle'>Shuffle</button>
<script>
  var sim = new altspace.utilities.Simulation();
  var list = ['Hollywood','Well','Foot','New York','Spring','Court','Tube','Point','Tablet','Slip','Date','Drill','Lemon','Bell',
'Screen','Fair','Torch','State','Match','Iron','Block','France','Australia','Limousine','Stream','Glove','Nurse','Leprechaun',
'Play','Tooth','Arm','Bermuda','Diamond','Whale','Comic','Mammoth','Green','Pass','Missile','Paste','Drop','Pheonix',
'Marble','Staff','Figure','Park','Centaur','Shadow','Fish','Cotton','Egypt','Theater','Scale','Fall','Track','Force',
'Dinosaur','Bill','Mine','Turkey','March','Contract','Bridge','Robin','Line','Plate','Band','Fire','Bank','Boom',
'Cat','Shot','Suit','Chocolate','Roulette','Mercury','Moon','Net','Lawyer','Satellite','Angel','Spider','Germany','Fork',
'Pitch','King','Crane','Trip','Dog','Conductor','Part','Bugle','Witch','Ketchup','Press','Spine','Worm','Alps',
'Bond','Pan','Beijing','Racket','Cross','Seal','Aztec','Maple','Parachute','Hotel','Berry','Soldier','Ray','Post',
'Greece','Square','Mass','Bat','Wave','Car','Smuggler','England','Crash','Tail','Card','Horn','Capital','Fence',
'Deck','Buffalo','Microscope','Jet','Duck','Ring','Train','Field','Gold','Tick','Check','Queen','Strike','Kangaroo',
'Spike','Scientist','Engine','Shakespeare','Wind','Kid','Embassy','Robot','Note','Ground','Draft','Ham','War','Mouse',
'Center','Chick','China','Bolt','Spot','Piano','Pupil','Plot','Lion','Police','Head','Litter','Concert','Mug',
'Vacuum','Atlantis','Straw','Switch','Skyscraper','Laser','Scuba Diver','Africa','Plastic','Dwarf','Lap','Life','Honey','Horseshoe',
'Unicorn','Spy','Pants','Wall','Paper','Sound','Ice','Tag','Web','Fan','Orange','Temple','Canada','Scorpion',
'Undertaker','Mail','Europe','Soul','Apple','Pole','Tap','Mouth','Ambulance','Dress','Ice Cream','Rabbit','Buck','Agent',
'Sock','Nut','Boot','Ghost','Oil','Superhero','Code','Kiwi','Hospital','Saturn','Film','Button','Snowman','Helicopter',
'Loch Ness','Log','Princess','Time','Cook','Revolution','Shoe','Mole','Spell','Grass','Washer','Game','Beat','Hole',
'Horse','Pirate','Link','Dance','Fly','Pit','Server','School','Lock','Brush','Pool','Star','Jam','Organ',
'Berlin','Face','Luck','Amazon','Cast','Gas','Club','Sink','Water','Chair','Shark','Jupiter','Copper','Jack',
'Platypus','Stick','Olive','Grace','Bear','Glass','Row','Pistol','London','Rock','Van','Vet','Beach','Charge',
'Port','Disease','Palm','Moscow','Pin','Washington','Pyramid','Opera','Casino','Pilot','String','Night',
'Chest','Yard','Teacher','Pumpkin','Thief','Bark','Bug','Mint','Cycle','Telescope','Calf','Air',
'Box','Mount','Thumb','Antarctica','Trunk','Snow','Penguin','Root','Bar','File','Hawk','Battery',
'Compound','Slug','Octopus','Whip','America','Ivory','Pound','Sub','Cliff','Lab','Eagle','Genious',
'Ship','Dice','Hood','Heart','Novel','Pipe','Himalayas','Crown','Round','India','Needle','Shop',
'Watch','Lead','Tie','Table','Cell','Cover','Czech','Back','Bomb','Ruler','Forest','Bottle',
'Space','Hook','Doctor','Ball','Bow','Degree','Rome','Plane','Giant','Nail','Dragon','Stadium',
'Flute','Carrot','Wake','Fighter','Model','Tokyo','Eye','Mexico','Hand','Swing','Key','Alien',
'Tower','Poison','Cricket','Cold','Knife','Church','Board','Cloak','Ninja','Olympus','Belt','Light',
'Death','Stock','Millionarie','Day','Knight','Pie','Bed','Circle','Rose','Change','Cap','Triangle'];
  
  var colors = ['red','red','red','red','red','red','red','red','red','blue','blue','blue','blue','blue','blue','blue','blue','yellow','yellow','yellow','yellow','yellow','yellow','yellow','black'];
  
  var rev = [];
  
  var config = {
    baseRefUrl: "https://altvr-apps.firebaseio.com/",
    authorId: "BenG",
    appId: "Codenames"
  }
  altspace.utilities.sync.connect(config).then(function(sync){
    var words = sync.instance.child('words');
    var key = sync.instance.child('key');
    var revealed = sync.instance.child('revealed');
    var spyMR = sync.instance.child('red');
    var spyMB = sync.instance.child('blue');
    
    var isSM = false;
    var team = '';
    var red = false;
    var blue = false;
    var redName = '';
    var blueName = '';
    
    altspace.getUser().then(function(user){
      var dataRequest = (THREE.FileLoader ? new THREE.FileLoader() : new THREE.XHRLoader(/* DEPRECATED: r83 */));
      dataRequest.setWithCredentials(true);
      dataRequest.load('https://account.altvr.com/api/v1/users/' + user.userId, onLoaded, undefined, undefined);
      function onLoaded(obj) {
        var name = JSON.parse(obj).users[0].username;
        if (findGetParameter('sm1') == null) {
          console.log('replace')
          location.replace(location.href + '&sm1=0&sm2=0')
        } else {
          if (name == findGetParameter('sm1') || name == findGetParameter('sm2')) {
            isSM = true;
            console.log('spymaster');
            if (!findGetParameter('hud')){
              var url = location.href + '&hud';
              altspace.open(url, '_experience', {hidden: true});
            }
          }
        }
      
        words.on('value', function(data){
          if (data.val() != null) {
            for (var i = 0; i < 5; i++) {
              for (var j = 0; j < 5; j++) {
                document.querySelector('table').rows[i].cells[j].innerHTML = data.val()[(i * 5) + (j + 1) - 1];
              }
            }
          }
        });
        key.on('value', function(data){
          if (data.val() != null) {
            colors = data.val();
            if (isSM) {
              for (var i = 0; i < 5; i++) {
                for (var j = 0; j < 5; j++) {
                  document.querySelector('table').rows[i].cells[j].style.borderColor = data.val()[(i * 5) + (j + 1) - 1];
                }
              }
            }
            
            document.querySelector('.smr').innerHTML = 'Red: ' + redName;
            document.querySelector('.smb').innerHTML = 'Blue: ' + blueName;
            //var count = {};
            //colors.forEach(function(x) { count[x] = (count[x] || 0)+1; });
            if (countColors().red == 9) {
              document.querySelector('.smr').innerHTML += ' &#9733';
            } else {
              document.querySelector('.smb').innerHTML += ' &#9733';
            }
          }
        });
        revealed.on('child_added', function(childSnapshot, prevChildKey){
          var id = childSnapshot.val();
          console.log('rev', id, document.querySelector('#' + id));
          document.querySelector('#' + id).style.backgroundColor = colors[Number(id.slice(1,id.length)) - 1];
          document.querySelector('#' + id).innerHTML = '';
        });
        revealed.on('child_removed', function(oldChildSnapshot) {
          for (var i = 0; i < 5; i++) {
            for (var j = 0; j < 5; j++) {
              document.querySelector('table').rows[i].cells[j].style.backgroundColor = 'black';
            }
          }
        });
        spyMR.on('value', function(data){
          if (data.val() == null) {
            red = false;
            document.querySelector('.smr').innerHTML = 'Red:';
            redName = '';
            if (team == 'red') {
              isSM = false;
              team = '';
              red = false;
              hideColors();
            }
          } else {
            red = true;
            document.querySelector('.smr').innerHTML = 'Red: ' + data.val();
            redName = data.val();
          }
          if (countColors().red == 9) {
            document.querySelector('.smr').innerHTML += ' &#9733';
          }
        });
        spyMB.on('value', function(data){
          if (data.val() == null) {
            blue = false;
            document.querySelector('.smb').innerHTML = 'Blue:';
            blueName = '';
            if (team == 'blue') {
              isSM = false;
              team = '';
              blue = false;
              hideColors();
            }
          } else {
            blue = true;
            document.querySelector('.smb').innerHTML = 'Blue: ' + data.val();
            blueName = data.val();
          }
          if (countColors().blue == 9) {
            document.querySelector('.smb').innerHTML += ' &#9733';
          }
        });
        /*document.querySelector('button').addEventListener('mousedown', function(){
          //console.log(list);
          //console.log(document.querySelector('table'));
          shuffleArray(list);
          shuffleArray(colors);
          words.set(list.slice(0,25));
          key.set(colors);
          rev = [];
          revealed.set([]);
          for (var i = 0; i < 5; i++) {
            for (var j = 0; j < 5; j++) {
              document.querySelector('table').rows[i].cells[j].innerHTML = list[(i * 5) + (j + 1) - 1];
              //document.querySelector('table').rows[i].cells[j].setAttribute('bgcolor', colors[(i * 5) + (j + 1) - 1]);
            }
          }
        });*/
        var cells = document.getElementsByTagName("td"); 
        for (var i = 0; i < cells.length; i++) { 
        cells[i].onclick = function(e){
          console.log(colors[Number(e.srcElement.id) - 1]);
          rev.push(e.srcElement.id);
          revealed.push(e.srcElement.id);
          e.srcElement.innerHTML = '';
          e.srcElement.style.backgroundColor = colors[Number(e.srcElement.id) - 1];
          };
        }

        var mat = new THREE.MeshBasicMaterial({color: 0x00ff00, transparent: true, opacity: 0});
        var a = 285;
        var b = 157;
        var c = 30;
        var d = -100;
        var e = -227;

        var a1 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        a1.position.set(-504,a,0);
        var a2 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        a2.position.set(-252,a,0);
        var a3 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        a3.position.set(0,a,0);
        var a4 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        a4.position.set(252,a,0);
        var a5 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        a5.position.set(504,a,0);

        var b1 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        b1.position.set(-504,b,0);
        var b2 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        b2.position.set(-252,b,0);
        var b3 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        b3.position.set(0,b,0);
        var b4 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        b4.position.set(252,b,0);
        var b5 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        b5.position.set(504,b,0);

        var c1 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        c1.position.set(-504,c,0);
        var c2 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        c2.position.set(-252,c,0);
        var c3 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        c3.position.set(0,c,0);
        var c4 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        c4.position.set(252,c,0);
        var c5 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        c5.position.set(504,c,0);

        var d1 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        d1.position.set(-504,d,0);
        var d2 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        d2.position.set(-252,d,0);
        var d3 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        d3.position.set(0,d,0);
        var d4 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        d4.position.set(252,d,0);
        var d5 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        d5.position.set(504,d,0);

        var e1 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        e1.position.set(-504,e,0);
        var e2 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        e2.position.set(-252,e,0);
        var e3 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        e3.position.set(0,e,0);
        var e4 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        e4.position.set(252,e,0);
        var e5 = new THREE.Mesh(new THREE.BoxGeometry(300,125,1), mat);
        e5.position.set(504,e,0);

        var redSm = new THREE.Mesh(new THREE.BoxGeometry(300,35,1), mat);
        redSm.position.set(-504,-330,0);
        var blueSm = new THREE.Mesh(new THREE.BoxGeometry(300,35,1), mat);
        blueSm.position.set(-248,-330,0);
        var shuf = new THREE.Mesh(new THREE.BoxGeometry(300,35,1), mat);
        shuf.position.set(254,-330,0);

        var grid = [a1,a2,a3,a4,a5, b1,b2,b3,b4,b5, c1,c2,c3,c4,c5, d1,d2,d3,d4,d5, e1,e2,e3,e4,e5];
        for (var i = 0; i < grid.length; i++) {
          //console.log(i);
          grid[i].name = i + 1;
          grid[i].addEventListener('cursorup', function(e){
            if (isSM) {
              console.log(e.target.name);
              var cell = document.querySelector('#a' + e.target.name);
              console.log(cell);
              revealed.push('a' + e.target.name);
            }
          });
        }

        redSm.addEventListener('cursorup', function(){
          if (red && user.isModerator) {
            spyMR.set(null);
          } else if (team == '' && !red) {
            console.log('red');
            isSM = true;
            team = 'red';
            red = true;
            document.querySelector('.smr').innerHTML = 'Red: ' + user.displayName;
            spyMR.set(user.displayName);
            showColors();
          } else if (team == 'red') {
            isSM = false;
            team = '';
            red = false;
            document.querySelector('.smr').innerHTML = 'Red:';
            spyMR.set(null);
            hideColors();
          }
          if (countColors().red == 9) {
            document.querySelector('.smr').innerHTML += ' &#9733';
          }
        });
        blueSm.addEventListener('cursorup', function(){
          if (blue && user.isModerator) {
            spyMB.set(null);
          } else if (team == '' && !blue) {
            console.log('blue');
            isSM = true;
            team = 'blue';
            blue = true;
            spyMB.set(user.displayName);
            document.querySelector('.smb').innerHTML = 'Blue: ' + user.displayName;
            showColors();
          } else if (team == 'blue') {
            isSM = false;
            team = '';
            blue = false;
            document.querySelector('.smb').innerHTML = 'Blue:';
            spyMB.set(null);
            hideColors();
          }
          if (countColors().blue == 9) {
            document.querySelector('.smb').innerHTML += ' &#9733';
          }
        });
        shuf.addEventListener('cursorup', function(){
          if (isSM || user.isModerator){
            shuffleArray(list);
            //red or blue
            var rand = Math.round(Math.random());
            var count = {};
            colors.forEach(function(x) { count[x] = (count[x] || 0)+1; });
            if (rand == 0) {
              console.log('red');
              if (count.red == 8) {
                colors[colors.indexOf('blue')] = 'red'
              }
              //document.querySelector('.smr').innerHTML += '★';
            } else {
              console.log('blue');
              if (count.blue == 8) {
                colors[colors.indexOf('red')] = 'blue'
              }
              //document.querySelector('.smb').innerHTML += '★';
            }

            shuffleArray(colors);
            words.set(list.slice(0,25));
            key.set(colors);
            rev = [];
            revealed.set([]);
            for (var i = 0; i < 5; i++) {
              for (var j = 0; j < 5; j++) {
                document.querySelector('table').rows[i].cells[j].innerHTML = list[(i * 5) + (j + 1) - 1];
                //document.querySelector('table').rows[i].cells[j].setAttribute('bgcolor', colors[(i * 5) + (j + 1) - 1]);
              }
            }
          }
        });

        /*c3.addEventListener('cursordown', function(){
          console.log('box click');
        });*/
        sim.scene.add(a1,a2,a3,a4,a5, b1,b2,b3,b4,b5, c1,c2,c3,c4,c5, d1,d2,d3,d4,d5, e1,e2,e3,e4,e5, redSm,blueSm,shuf);


      }
    });
  });

  altspace.getDocument().then(function(doc){
    doc.userData.altspace = {collider: {enabled: false}};
  });
  
  function hideColors() {
    for (var i = 0; i < 5; i++) {
      for (var j = 0; j < 5; j++) {
        document.querySelector('table').rows[i].cells[j].style.borderColor = 'white';
      }
    }
  }

  function showColors() {
    for (var i = 0; i < 5; i++) {
      for (var j = 0; j < 5; j++) {
        document.querySelector('table').rows[i].cells[j].style.borderColor = colors[(i * 5) + (j + 1) - 1];
      }
    }
  }

  function countColors() {
    var count = {};
    colors.forEach(function(x) { count[x] = (count[x] || 0)+1; });
    return count;
  }

  function shuffleArray(array) {
    for (var i = array.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = array[i];
      array[i] = array[j];
      array[j] = temp;
    }
    return array;
  }
  
  function findGetParameter(parameterName) {
    var result = null,
        tmp = [];
    location.search
    .substr(1)
        .split("&")
        .forEach(function (item) {
        tmp = item.split("=");
        if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
    });
    return result;
  }

  var list2 = ['Horse','Sauna','Hooker','Stool','Mouth','Touchdown','Snake','Whiskey','Pickle','Hose','Legend','Blush','Dick','Cock',
'Alcohol','Sausage','Pecker','Straight','Sore','Toy','Black','White','Period','Couch','Juice','Bra','Dame','Chick',
'Bitch','Score','Sheep','Strap','Mattress','Train','Bondage','Wiener','Penis','Furry','Joystick','Apples','Condom','Bisexual',
'Hole','Secretary','Roll','Strip','Freak','Tramp','Foreskin','Wine','Pee','Experiment','Johnson','Banana','Clam','Blow',
'Balloon','Semen','Regret','Stripper','Homerun','Trim','Bar','Wood','Paddle','Cowgirl','JustJohn','Candle','Cigarette','Cigar',
'Knob','Sex','Gang','Stud','Screw','Trousers','Safe','Girl','Package','Grope','Jewels','Beach','Chubby','Beef',
'Bender','Shaft','Peaches','Swallow','Flower','Trunk','Sack','Job','Onion','Bowl','Jerk','Crap','Bush','Box',
'Mushroom','Shame','Couple','Sweat','Strobe','Tubesteak','Rug','Butt','Nylon','Lick','Hotel','Boy','Boob','Biscuits',
'Fatty','Share','Slut','Swimmers','Pound','Tuna','Roach','Brownie','Nuts','Blonde','Horny','Catcher','Body','Dominate',
'Mole','Shave','Orgasm','Taboo','Roof','Twig','Red','Lube','Nude','Eat','Hooters','Legs','Behind','Olive',
'Brown','Shower','Oyster','Taco','Salad','Udders','Rave','Inch','Nipple','Gay','High','Booze','Beaver','Pussy',
'Ice','Skank','Melons','Tail','Rack','Uranus','Queer','Lingerie','Needle','Escort','Herb','Bear','Beans','Log',
'Hamster','Skirt','Gigolo','Tap','Pie','Vasectomy','Queen','Group','Necklace','Commando','Headlights','Ashes','Bacon','Goose',
'Pillows','Smell','Latex','Tavern','Smegma','Vegas','Queef','Hot','Navel','Gag','Headboard','Bed','Ass','Caboose',
'Carpet','Smoke','Cuffs','Teabag','Shot','Vein','Purple','Gash','Nail','Hand','Head','Chaps','Animal','Coozie',
'Fish','Snatch','Rookie','Tease','Snort','Vibrator','Pucker','Film','Mug','Bang','Hammer','Grandma',
'Grass','Sniff','Prick','Tent','Baked','Video','Pub','G-Spot','Movie','Jazz','Friction','Eyes',
'Drunk','Softballs','Kitty','Tequila','Bottom','Vinyl','Prostate','Chains','Motorboat','Crabs','French','Hurl',
'Cheek','Solo','Lizard','Threesome','Breast','Virgin','Prison','Donkey','Monkey','Douche','Freckles','Bond',
'Keg','Spank','Boxers','Throat','Pinch','Vodka','Pot','Lips','Mom','Finger','Fluff','Bling',
'Rectum','Speed','Missionary','Tickle','Sin','Vomit','Porn','Cuddle','Moist','Manboobs','Flash','Dildo',
'Cocktail','Sperm','Emission','tie','Diarrhea','Wad','Pork','Bottle','Mixer','Crack','Fist','Club',
'Cucumber','Spoon','Seed','Tip','Intern','Wang','Pole','Champagne','Milk','Loose','Fire','Choke',
'Noodle','Spread','Doggy','Tit','Beer','Waste','Poker','Gerbil','Member','Bartender','Fetish','Bone',
'Motel','Squirt','Lotion','Tongue','Flesh','Watch','Player','Balls','Meat','Cream','Fecal','Rubber',
'Kinky','Stalker','Bust','Tool','Skid','Wax','Pitcher','Knees','Martini','Lobster','Feather','Booty',
'Joint','Steamy','Mesh','Top','Facial','Weed','Pipe','Cherry','Lust','Knockers','Fantasy','Hump',
'Poop','Stiff','Nurse','Torture','Bong','Wench','Pink','Gangbang','Love','Coyote','Drill','Acid',
'Line','Stiletto','Turd','Touch','Daddy','Wet','Pimp','Hell','Liquor','Burn','Drag','Cougar',
'Briefs','Stones','Naked','Orgy','Chest','Whip','Pig','Jugs','Lighter','Cannons','Down','Clap'];

if (findGetParameter('undercover')) {
  list = list2;
}
if (findGetParameter('mixed')) {
  list += ',' + list2;
}
</script>
</body>
</html>